campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 24,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 15,
        "fields": {
            "year": 1984,
            "display_year": "1984WestHollywood",
            "summary": "<b>I see The Light.</b><br> After two centuries of being sodomized by fat cats from Washington, the free spirits of the City of Angels are now enfranchised with the crumbs of autonomy. Fresh, plastic lawns slide unto the sidewalks where many kids got their brains curbed. After Tommy's triumphant win in Fat City, Colorado, believing in this generation's ability to unshackle itself from the gruel and disgusting repertoire of classically-trained politicians has become less a chore and more of a exercise in masturbation.<br>I am truly washed at this point. Reaching my 40s, creeping age comes to eat away my queer youth and to wound-fuck my friends from their transition to Real Men. The National Socialist program, it lives on, it lives on in the hearts of the fag youth, heroic in their muscular cult of rubber and leather.  Will they be able to rock West Hollywood, their capital, and potentially the future of LA itself?",
            "image_url": "https://i.ibb.co/G47DnNNp/thelight.png",
            "winning_electoral_vote_number": 10,
            "advisor_url": "https://i.ibb.co/fVbxKMCZ/image.png",
            "recommended_reading": "<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
            "has_visits": 1,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 15,
        "year": 1984,
        "is_premium": 0,
        "display_year": "1984WestHollywood"
    }
]

campaignTrail_temp.credits = "RTKH/Galen"

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 152,
        "fields": {
            "first_name": "Russell R.",
            "last_name": "Veh",
            "election": 15,
            "party": "National Socialist League",
            "state": "West Hollywood",
            "priority": 1,
            "description": "<p>The Führer of Sodom, the great Raymond of parts Midwestern, carpetbagging in the most beautiful beaches in God's earth has sought the crown jewel of the National Socialist movement in America; the hippie capital, the true city of Ubermensches. He looks towards the Surfer Swastika, hoping to ride the Kali Yuga through the centuries of conquering and blood that permeate the filth of Ell Ay.<br>Typewriters will not be enough. Through the challenges of being a roving band of libertines from predilections of particularly fascistic politics-as-sex, Russell has a insurmountable challenge in front of him as the Mayor of West Hollywood in gaining further footing for the Gay Nazi movement in redeeming itself from seemingly impossible odds, from a man's hole to the obelisks of power. How will the Führer survive the hoops and trials of an unforgiving Administration breathing down the weirdoes' necks?</p>",
            "color_hex": "#612f00",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.ibb.co/sd0mkPFR/pors.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 156,
        "fields": {
            "first_name": "Jim",
            "last_name": "Cherry",
            "election": 15,
            "party": "National Socialist League (Old Guard)",
            "state": "West Hollywood",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.ibb.co/dsWsmd5g/wors.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>The Old Wizard. He's been in it for a while and although he despises the fact Veh took the NSL away from its original Führer, he still has to contend with his position as underling if he is to survive in these streets of grime and horror. They're so unforgiving. They know what he's done, and what everyone else's done too.<br>It doesn't matter, he will persevere. He knows that there is little maneuvering, and ultimately it is absolutely necessary for National Socialism to thrive before any personal qualms and grudges. We are in a Party, sweetheart, let's have a good time and drop all this bull-shit. Come on!</p>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 154,
        "fields": {
            "first_name": "Jackals and",
            "last_name": "Conformists",
            "election": 15,
            "party": "Democratic",
            "state": "Los Angeles",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 155,
        "fields": {
            "first_name": "Veep",
            "last_name": "Conformists",
            "election": 15,
            "party": "Democratic",
            "state": "Los Angeles",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 153,
        "fields": {
            "first_name": "Reactionaries and",
            "last_name": "\"Conservatives\"",
            "election": 15,
            "party": "Republican",
            "state": "Los Angeles",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#ff0000",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 15578,
        "fields": {
            "first_name": "Reactionaries and",
            "last_name": "Conservatives",
            "election": 15,
            "party": "Republican",
            "state": "Los Angeles",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 109261,
        "fields": {
            "candidate": 152,
            "running_mate": 156
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 166833,
        "fields": {
            "candidate": 154,
            "running_mate": 155
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 121775,
        "fields": {
            "candidate": 153,
            "running_mate": 15578
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 15,
        "candidates": [
            152,
            154,
            153
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 15,
        "candidates": [
            152,
            154,
            153
        ]
    }
]

jet_data = {
    "headerColor": "#ff0033",
    "windowColor": "#000000",
    "containerColor": "#000000",
    "innerWindowColor": "#ffffff",
    "bannerImageUrl": "https://i.ibb.co/CKNCbNDB/image.png",
    "backgroundImageUrl": "https://i.ibb.co/8Lq0csDV/image.png",
    "endingTextColor": "#000000",
    "customQuote": "",
    "gameTitle": "𝐼 𝑊𝐼𝐿𝐿 𝐹𝑂𝐿𝐿𝑂𝑊 𝐻𝐼𝑀"
}

//#startcode


corrr = '\n              <h2 class="neon">I WILL FOLLOW HIM</h2>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#4f003b";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#000000";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#000000";

document.getElementById("header").src = "https://i.ibb.co/gbqVHf3Q/baby-youre-torturing-me.png";

document.body.background = "https://i.ibb.co/8Lq0csDV/image.png";

document.head.innerHTML += "<style>#results_container {color:#ffffff;} .election_description_window {background-color:#000000!important} .campaign_trail_start_emphasis {background-color:#000000!important; color:#000000!important} .game_start {color:#ff4040!important} .inner_window_front {background-color:#000000!important}.inner_window_w_desc {background-color:#000000!important;} .person_description_window {background-color:#000000!important} .person_summary {color:#e7008f!important} .inner_window_w_desc {color:#e7008f!important} .description_window_small {background-color:#310827!important} </style>";

    document.head.innerHTML += `<style>
    h3 {
      font-size:1.17em!important;
      color: #e7008f;
    }
    h4 {
      color: #e7008f;
    }
    h2 {
      color: #e7008f;
    }
    h1 {
      color: #e7008f;
    }
    p {
        color: #e7008f;
    }
    tooltiptext {
        color: #e7008f;
    }
    b {
        color: #ffffff;
    }
    label {
        color: #e7008f;
    }
    ul {
        color: #e7008f;
    }
  body {display:flex!important;}
  #game_window{max-width:1000px;}
button {
            appearance: none;
            background-color: #000!important;
            border: #7d0000!important;
            color: #7d0000!important;
}
button:active {
            appearance: none;
            background-color: #ff6363!important;
            border: #4a0037!important;
            color: #4a0037!important;
}
button:hover {
            appearance: none;
            background-color: #8b9c72!important;
            border: #473925!important;
            color: #260c0c!important;
}
select {
    color: #c40000;
    appearance: none;
    box-sizing: border-box;
    align-items: center;
    -webkit-rtl-ordering: logical;
    background-color: #000;
    cursor: default;
    margin: 0em;
    white-space: pre;
    border-width: 2px;
    border-style: solid;
    border-color: light-dark(rgb(19, 84, 29), rgb(29, 133, 44));
    border-image: initial;
    border-radius: 0px;
}
@import url(https://fonts.googleapis.com/css?family=Exo+2:200i);

        .inner_window_question h3 .mytooltip{
            background-color: #d6a1c4;
        }
        #tt img {
            max-width: 220px;
            height: auto;
            box-shadow: 1px 1px 1px 1px rgba(0, 0, 255, .15);
        }


        .mytooltip:hover .mytooltiptext {
            opacity: 1;
            transition-delay: 0.5s;
        }

:root {
  /* Set neon color */
  --neon-text-color: #f40;
  --neon-border-color: #08f;
}

.neon {
  font-size: 13rem;
  font-weight: 200;
  font-family: 'Exo 2', sans-serif;
  font-style: italic;
  color: #fff;
  padding: 4rem 6rem 5.5rem;
  text-shadow:
            -0.2rem -0.2rem 1rem #fff,
            0.2rem 0.2rem 1rem #fff,
            0 0 2rem var(--neon-text-color),
            0 0 4rem var(--neon-text-color),
            0 0 6rem var(--neon-text-color),
            0 0 8rem var(--neon-text-color),
            0 0 10rem var(--neon-text-color);
        
        box-shadow:
            0 0 .5rem #fff,
            inset 0 0 .5rem #fff,
            0 0 2rem var(--neon-border-color),
            inset 0 0 2rem var(--neon-border-color),
            0 0 4rem var(--neon-border-color),
            inset 0 0 4rem var(--neon-border-color);         
}
    </style>`
campaignTrail_temp.modBoxTheme = {
    "header_color" : "#000000",
    "header_text_color" : "#e7008f",
    "header_image_url" : "https://i.ibb.co/9HQBSnPF/iwfh.png",
    "description_text_color" : "#e7008f",
    "description_background_color" : "#240e23",
    "main_color" : "#3a2a3b",
    "secondary_color" : "#805a82",
    "ui_text_color": "#e7008f"
  }

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div-timetrack");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#1c1c1c;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div-gusic");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#000000;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

soundtracks = {
  0: {
    name: "Scorpio Rising",
    tracklist: [
      {
        "name": "Scorpio Rising (1963) Soundtrack",
        "url": "https://audio.jukehost.co.uk/efhWuUDuFzGKQlnZMPHPnTA3jSDccflm"
      }
    ]
  }
}

// Set up new music player

newMusicPlayer()
//#endcode

campaignTrail_temp.achievements = {
  "Velvet Is The New Leather" : {
      "image" : "https://i.ibb.co/GvGBN4bt/ach1.png",
      "description" : "Ending 1 of 7.",
      "cannotBeCheated" : true
  },
  "Blutkrone" : {
      "image" : "https://i.ibb.co/1tgJfC9R/ach3-1.png",
      "description" : "Ending 2 of 7.",
      "cannotBeCheated" : true
  },
  "Einheitsfront" : {
      "image" : "https://i.ibb.co/jvSLJVx0/ach4-1.png",
      "description" : "Ending 3 of 7.",
      "cannotBeCheated" : true
  },
  "Marschieren im Geist" : {
      "image" : "https://i.ibb.co/Z1SZ8BQS/ach2.png",
      "description" : "Ending 4 of 7.",
      "cannotBeCheated" : true
  },
  "Paradise Lost" : {
      "image" : "https://i.ibb.co/d0j1H8yS/ach5.png",
      "description" : "Ending 5 of 7.",
      "cannotBeCheated" : true
  },
  "Totalen Krieg" : {
      "image" : "https://i.ibb.co/nq55MNhW/ach6.png",
      "description" : "Ending 6 of 7.",
      "cannotBeCheated" : true
  },
  "Forgettable" : {
      "image" : "https://i.ibb.co/k2QKfB1N/ach7.png",
      "description" : "Ending 7 of 7.",
      "cannotBeCheated" : true
  }
}


//#endcode
